document.addEventListener("DOMContentLoaded", () => {
  category_filter = document.getElementById("category_filter")
  categoryButtons = category_filter.querySelectorAll(".filter-btn")
  privacyButtons = document.getElementById("privacy-filter").querySelectorAll(".filter-btn")
  // results = document.querySelectorAll("#result_card:not(.hidden)");
  // resultat = document.querySelector("#result_card")
  results = document.querySelectorAll("#result_card")


  // No privacy filter on pages and photos

  // TODO :
  // Add privacy filter 'everyone' by default if category == page
  // My method doesn't work for the filter 'All' -> to fix
  // Check current privacy filter when clicking on category_filter


  // privacy filter
  everyone = document.getElementById("everyone")
  everyone.addEventListener("click", (event) => {
    privacyButtons.forEach((button) => {
      button.classList.remove("active")
    });
    everyone.classList.add("active");

    activeFilter = category_filter.querySelector(".active").id.slice(0,-1)

    results.forEach((result) => {
      if (result.classList.contains("EVERYONE") && result.classList.contains(activeFilter)){
        result.classList.remove("hidden")
      } else {
        result.classList.add("hidden")
      };
    })
  })

  friends = document.getElementById("friends")
  friends.addEventListener("click", (event) => {
    privacyButtons.forEach((button) => {
      button.classList.remove("active")
    });
    friends.classList.add("active");

    category_filter = document.getElementById("category_filter")
    activeFilter = category_filter.querySelector(".active").id.slice(0,-1)

    results.forEach((result) => {
      if (result.classList.contains("ALL_FRIENDS") && result.classList.contains(activeFilter)){
        result.classList.remove("hidden")
      } else {
        result.classList.add("hidden")
      };
    })
  })

  myself = document.getElementById("myself")
  myself.addEventListener("click", (event) => {
    privacyButtons.forEach((button) => {
      button.classList.remove("active")
    });
    myself.classList.add("active");

    activeFilter = category_filter.querySelector(".active").id.slice(0,-1)

    results.forEach((result) => {
      if (result.classList.contains("SELF") && result.classList.contains(activeFilter)){
        result.classList.remove("hidden")
      } else {
        result.classList.add("hidden")
      };
    })
  })

  nofilters = document.getElementById("nofilters")
  nofilters.addEventListener("click", (event) => {
    privacyButtons.forEach((button) => {
      button.classList.remove("active")
    });
    nofilters.classList.add("active");

    activeFilter = category_filter.querySelector(".active").id.slice(0,-1)

    results.forEach((result) => {
      if (result.classList.contains(activeFilter)){
        result.classList.remove("hidden")
      } else {
        result.classList.add("hidden")
      };
    })
  })

  // category filter
  photos = document.getElementById("photos")
  photos.addEventListener("click", (event) => {
    categoryButtons.forEach((button) => {
      button.classList.remove("active")
    });
    photos.classList.add("active");
    results.forEach((result) => {
      if (!(result.classList.value.includes("photo"))){
        result.classList.add("hidden")
      } else {
        result.classList.remove("hidden")
      };
    })
  })

  videos = document.getElementById("videos")
  videos.addEventListener("click", (event) => {
    categoryButtons.forEach((button) => {
      button.classList.remove("active")
    });
    videos.classList.add("active");
    results.forEach((result) => {
      if (!(result.classList.value.includes("video"))){
        result.classList.add("hidden")
      } else {
        result.classList.remove("hidden")
      };
    })
  })

  texts = document.getElementById("posts")
  texts.addEventListener("click", (event) => {
    categoryButtons.forEach((button) => {
      button.classList.remove("active")
    });
    texts.classList.add("active");
    results.forEach((result) => {
      if (!(result.classList.value.includes("post"))){
        result.classList.add("hidden")
      } else {
        result.classList.remove("hidden")
      };
    })
  })

  reverse = document.getElementById("reverse")
  reverse.addEventListener("click", (event) => {
   categoryButtons.forEach((button) => {
     button.classList.remove("active")
   });
   reverse.classList.add("active");
  })

  pages = document.getElementById("pages")
  pages.addEventListener("click", (event) => {
    categoryButtons.forEach((button) => {
      button.classList.remove("active")
    });
    pages.classList.add("active");
    results.forEach((result) => {
      if (!(result.classList.value.includes("page"))){
        result.classList.add("hidden")
      } else {
        result.classList.remove("hidden")
      };
    });
  });


  all = document.getElementById("all")
  all.addEventListener("click", (event) => {
    categoryButtons.forEach((button) => {
      button.classList.remove("active")
    });
    all.classList.add("active");
    results.forEach((result) => {
      result.classList.remove("hidden");
    });
  });


});





// // Ancien code

// document.addEventListener("DOMContentLoaded", () => {
//   buttons = document.querySelectorAll(".filter-btn")
//   results = document.querySelectorAll("#result_card")

//   // privacy filter
//   everyone = document.getElementById("everyone")
//   everyone.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     everyone.classList.add("active");
//     results.forEach((result) => {
//       if (!(result.classList.value.includes("EVERYONE"))){
//         result.classList = result.classList + " hidden"
//       } else {
//         result.classList.remove("hidden")
//       };
//     })
//   })

//   friends = document.getElementById("friends")
//   friends.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     friends.classList.add("active");
//     results.forEach((result) => {
//       if (!(result.classList.value.includes("FRIENDS"))){
//         result.classList = result.classList + " hidden"
//       } else {
//         result.classList.remove("hidden")
//       };
//     })
//   })

//   myself = document.getElementById("myself")
//   myself.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     myself.classList.add("active");
//     results.forEach((result) => {
//       if (!(result.classList.value.includes("SELF"))){
//         result.classList = result.classList + " hidden"
//       } else {
//         result.classList.remove("hidden")
//       };
//     })
//   })

//   nofilters = document.getElementById("nofilters")
//   nofilters.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     nofilters.classList.add("active");
//     results.forEach((result) => {
//       result.classList.remove("hidden")
//     })
//   })

//   // category filter
//   photos = document.getElementById("photos")
//   photos.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     photos.classList.add("active");
//     results.forEach((result) => {
//       if (!(result.classList.value.includes("photo"))){
//         result.classList = result.classList + " hidden"
//       } else {
//         result.classList.remove("hidden")
//       };
//     })
//   })

//   videos = document.getElementById("videos")
//   videos.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     videos.classList.add("active");
//     results.forEach((result) => {
//       if (!(result.classList.value.includes("video"))){
//         result.classList = result.classList + " hidden"
//       } else {
//         result.classList.remove("hidden")
//       };
//     })
//   })

//   texts = document.getElementById("texts")
//   texts.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     texts.classList.add("active");
//     results.forEach((result) => {
//       if (!(result.classList.value.includes("post"))){
//         result.classList = result.classList + " hidden"
//       } else {
//         result.classList.remove("hidden")
//       };
//     })
//   })

//   reverse = document.getElementById("reverse")
//   reverse.addEventListener("click", (event) => {
//    buttons.forEach((button) => {
//      button.classList.remove("active")
//    });
//    reverse.classList.add("active");
//   })

//   pages = document.getElementById("pages")
//   pages.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     pages.classList.add("active");
//     results.forEach((result) => {
//       if (!(result.classList.value.includes("page"))){
//         result.classList = result.classList + " hidden"
//       } else {
//         result.classList.remove("hidden")
//       };
//     });
//   });


//   all = document.getElementById("all")
//   all.addEventListener("click", (event) => {
//     buttons.forEach((button) => {
//       button.classList.remove("active")
//     });
//     all.classList.add("active");
//     results.forEach((result) => {
//       result.classList.remove("hidden");
//     });
//   });


// });
